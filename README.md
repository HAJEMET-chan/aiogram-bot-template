# aiogram-bot-template

–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Telegram-–±–æ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ **aiogram 3.x**.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö:**
- **[BEGINNER_GUIDE.md](BEGINNER_GUIDE.md)** ‚≠ê - **–ù–ê–ß–ù–ò–¢–ï –û–¢–°–Æ–î–ê!** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å –Ω—É–ª—è
- **[STEP_BY_STEP_TUTORIAL.md](STEP_BY_STEP_TUTORIAL.md)** - –ü–æ—à–∞–≥–æ–≤—ã–π —Ç—É—Ç–æ—Ä–∏–∞–ª –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É

**–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- **[ARCHITECTURE.md](ARCHITECTURE.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —à–∞–±–ª–æ–Ω–∞
- **[USAGE_GUIDE.md](USAGE_GUIDE.md)** - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **[FLOW_DIAGRAMS.md](FLOW_DIAGRAMS.md)** - –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **[CHEATSHEET.md](CHEATSHEET.md)** - –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **[SUMMARY.md](SUMMARY.md)** - –†–µ–∑—é–º–µ –∏–∑—É—á–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - structlog —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î** - PostgreSQL —Å connection pooling
- ‚úÖ **FSM —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - Redis –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ webhook –∏ polling** - –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- ‚úÖ **–£–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä** - —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ì–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - Docker, systemd, –ø—Ä–∏–º–µ—Ä—ã –¥–µ–ø–ª–æ—è

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd aiogram-bot-template

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
poetry install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp example.env .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env
nano .env
```

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```env
BOT_TOKEN=your_bot_token
PG_HOST=localhost
PG_PORT=5432
PG_USER=postgres
PG_PASSWORD=password
PG_DATABASE=bot_db
FSM_HOST=127.0.0.1
FSM_PORT=6379
FSM_PASSWORD=
USE_WEBHOOK=false
LOGGING_LEVEL=10
```

### 3. –ó–∞–ø—É—Å–∫

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
poetry shell

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python -m bowling_bot.bot
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bowling_bot/
‚îú‚îÄ‚îÄ bot.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ data/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ db/                 # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ keyboards/          # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ middlewares/        # Middleware
‚îú‚îÄ‚îÄ models/             # Pydantic –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ states/             # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ utils/              # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ web_handlers/       # Webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
```

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **aiogram 3.x** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram Bot API
- **asyncpg** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **redis** - FSM –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **structlog** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **aiohttp** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è webhook
- **aiojobs** - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

```python
# handlers/user/start.py
from aiogram import types
from aiogram.fsm.context import FSMContext

async def start(msg: types.Message, state: FSMContext) -> None:
    await msg.answer("–ü—Ä–∏–≤–µ—Ç!")
    await state.set_state(states.user.UserMainMenu.menu)
```

### –†–∞–±–æ—Ç–∞ —Å –ë–î

```python
# –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
db_conn: PostgresConnection = dp["db_conn"]

result = await db_conn._fetchrow(
    "SELECT * FROM users WHERE id = $1",
    (user_id,)
)
user = result.convert(UserModel)
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

```python
from bowling_bot.keyboards.default import BasicButtons

keyboard = BasicButtons.confirmation(add_back=True)
await msg.answer("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ:", reply_markup=keyboard)
```

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ [USAGE_GUIDE.md](USAGE_GUIDE.md).

## üîß –ö–æ–º–∞–Ω–¥—ã

```bash
# –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make lint

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
make init_project
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–°–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## ü§ù –í–∫–ª–∞–¥

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è pull requests –∏ issues!

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
